# Specification: Project Verification and Safety Enhancement\n\n## Overview\nThis track focuses on establishing a baseline of quality for the existing project and implementing a critical safety/UX enhancement: Optimistic Offline Authentication. This allows users to access the app while offline even if their access token has expired, as long as a valid refresh token exists.\n\n## Goals\n1. **Baseline Verification:** Run and confirm passing of all static analysis, unit, integration, and E2E tests.\n2. **Optimistic Offline Auth:** Modify `LocalAuthService` to restore sessions locally when offline with an expired token, deferring refresh until connectivity is restored.\n3. **Cross-Service Validation:** Ensure the local auth logic remains consistent with the `api-gateway` and `login` service behaviors.\n\n## Acceptance Criteria\n- All existing 2200+ unit tests pass.\n- Integration and E2E tests pass against the real Docker backend.\n- Static quality gates (lint, dead-code, circular deps) are green.\n- Users can bypass the login screen while offline with an expired token.\n- Automatic token refresh occurs successfully upon reconnection.\n\n## Technical Details\n- **Target File:** `src/app/core/services/local-auth.service.ts`\n- **Detection:** Use `@capacitor/network` to detect connectivity state.\n- **State Restoration:** Manually update `authStateSubject` during offline initialization.
