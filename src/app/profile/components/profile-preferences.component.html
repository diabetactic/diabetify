<section class="card">
  <h3 class="text-dark m-0 text-lg font-bold">{{ 'profile.preferences' | translate }}</h3>

  <div class="mt-5 space-y-2">
    <!-- Advanced Settings -->
    <button
      type="button"
      class="preference-row link w-full transition-colors hover:bg-gray-50 active:bg-gray-100 dark:hover:bg-gray-800/50"
      (click)="onGoToSettings()"
      data-testid="settings-btn"
    >
      <div class="flex min-w-0 flex-1 items-center gap-4">
        <div
          class="bg-primary/10 text-primary flex h-10 w-10 items-center justify-center rounded-full"
        >
          <app-icon name="settings-outline" aria-hidden="true" class="text-2xl"></app-icon>
        </div>
        <div class="text-left">
          <p class="text-dark m-0 text-base font-semibold">
            {{ 'profile.advancedSettings' | translate }}
          </p>
          <p class="text-medium mb-0 mt-0.5 text-xs">
            {{ 'profile.advancedSettingsDesc' | translate }}
          </p>
        </div>
      </div>
      <app-icon
        name="chevron-forward-outline"
        aria-hidden="true"
        class="text-medium text-lg opacity-50"
      ></app-icon>
    </button>

    <!-- Tips & Advice -->
    <button
      type="button"
      class="preference-row link w-full transition-colors hover:bg-gray-50 active:bg-gray-100 dark:hover:bg-gray-800/50"
      (click)="onGoToTips()"
      data-testid="tips-btn"
    >
      <div class="flex min-w-0 flex-1 items-center gap-4">
        <div
          class="bg-warning/10 text-warning flex h-10 w-10 items-center justify-center rounded-full"
        >
          <app-icon name="bulb-outline" aria-hidden="true" class="text-2xl"></app-icon>
        </div>
        <div class="text-left">
          <p class="text-dark m-0 text-base font-semibold">
            {{ 'tips.title' | translate }}
          </p>
          <p class="text-medium mb-0 mt-0.5 text-xs">
            {{ 'tips.subtitle' | translate }}
          </p>
        </div>
      </div>
      <app-icon
        name="chevron-forward-outline"
        aria-hidden="true"
        class="text-medium text-lg opacity-50"
      ></app-icon>
    </button>
  </div>
</section>

<section class="card mt-6">
  <div class="mb-5 flex items-center gap-3 border-b border-gray-100 pb-4 dark:border-gray-800">
    <div class="bg-primary/10 text-primary flex h-10 w-10 items-center justify-center rounded-full">
      <app-icon name="options-outline" aria-hidden="true" class="text-2xl"></app-icon>
    </div>
    <h3 class="text-dark m-0 text-lg font-bold">
      {{ 'settings.general' | translate }}
    </h3>
  </div>

  <div class="space-y-6">
    <!-- Notifications Toggle -->
    <div>
      <div class="flex items-center justify-between py-1">
        <div>
          <p class="text-dark m-0 text-base font-semibold">
            {{ 'profile.notifications.master' | translate }}
          </p>
          <p class="text-medium mb-0 mt-0.5 text-xs">
            {{ 'profile.notifications.desc' | translate }}
          </p>
        </div>
        <ion-toggle
          [checked]="notificationsEnabled"
          (ionChange)="onNotificationsToggle($event)"
          aria-label="{{ 'profile.notifications.master' | translate }}"
          data-testid="notifications-master-toggle"
          mode="ios"
        ></ion-toggle>
      </div>

      @if (notificationsEnabled) {
        <div class="mt-4 pt-2">
          <button
            type="button"
            class="btn btn-outline btn-primary btn-sm w-full gap-2 font-medium"
            (click)="onTestNotification()"
            data-testid="test-notification-btn"
          >
            <app-icon name="paper-plane-outline"></app-icon>
            {{ 'profile.notifications.testButton' | translate }}
          </button>
        </div>
      }
    </div>

    <!-- Biometrics Toggle -->
    <div class="flex items-center justify-between py-1">
      <div>
        <p class="text-dark m-0 text-base font-semibold">
          {{ 'biometric.settings.title' | translate }}
        </p>
        <p class="text-medium mb-0 mt-0.5 text-xs">
          {{ 'biometric.settings.description' | translate }}
        </p>
      </div>
      <ion-toggle
        [checked]="biometricEnabled"
        (ionChange)="onBiometricToggle($event)"
        aria-label="{{ 'biometric.settings.title' | translate }}"
        data-testid="biometric-toggle"
        mode="ios"
      ></ion-toggle>
    </div>
  </div>
</section>
