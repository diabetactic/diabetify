<ion-content class="login-content">
  <div class="login-shell page-shell">
    <div class="login-illustration">
      <img src="assets/images/cloud-frame.webp" alt="" class="cloud-frame" aria-hidden="true" />
      <img
        src="assets/images/welcome-kids.webp"
        alt="{{ 'welcome.heroAlt' | translate }}"
        class="kids-image"
      />
    </div>
    <h1 class="login-title">{{ 'app.name' | translate }}</h1>
    <p class="login-subtitle">
      {{ 'welcome.subtitle' | translate }}
    </p>

    <div class="login-card">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <label class="field-label" for="username">
          {{ 'login.username.label' | translate }}
        </label>
        <div class="input-wrapper">
          <ion-icon name="person-outline" class="input-icon" aria-hidden="true"></ion-icon>
          <input
            id="username"
            type="text"
            formControlName="username"
            placeholder="{{ 'login.username.placeholder' | translate }}"
            autocomplete="username"
            inputmode="email"
            autocapitalize="none"
            spellcheck="false"
            class="login-input"
            data-testid="login-username-input"
          />
        </div>
        <label class="field-label" for="password">
          {{ 'login.password.label' | translate }}
        </label>
        <div class="input-wrapper">
          <ion-icon name="lock-closed-outline" class="input-icon" aria-hidden="true"></ion-icon>
          <input
            id="password"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="{{ 'login.password.placeholder' | translate }}"
            autocomplete="current-password"
            autocapitalize="none"
            spellcheck="false"
            class="login-input"
            data-testid="login-password-input"
          />
          <ion-button
            fill="clear"
            (click)="togglePasswordVisibility()"
            class="password-toggle-btn"
            data-testid="toggle-password-visibility-btn"
            [attr.aria-label]="
              showPassword ? ('login.hidePassword' | translate) : ('login.showPassword' | translate)
            "
            type="button"
          >
            <ion-icon
              slot="icon-only"
              [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
              aria-hidden="true"
            ></ion-icon>
          </ion-button>
        </div>

        <div class="remember-row">
          <ion-checkbox
            formControlName="rememberMe"
            data-testid="remember-me-checkbox"
            labelPlacement="end"
            [attr.aria-label]="'login.rememberMe' | translate"
            >{{ 'login.rememberMe' | translate }}</ion-checkbox
          >
        </div>

        <button
          id="login-submit-btn"
          type="submit"
          class="login-cta"
          [disabled]="isLoading || loginForm.invalid"
          data-testid="login-submit-btn"
        >
          <span *ngIf="!isLoading">{{ 'login.submitButton' | translate }}</span>
          <span *ngIf="isLoading" class="flex items-center justify-center gap-2">
            <app-icon name="loader" class="animate-spin"></app-icon>
            {{ 'login.messages.loggingIn' | translate }}
          </span>
        </button>

        <div class="footer-legal mt-6">
          <span>© 2025 {{ 'app.name' | translate }} v0.0.1</span>
          <span>{{ 'common.terms' | translate }}</span>
          <span>{{ 'common.privacy' | translate }}</span>
          <span>{{ 'common.support' | translate }}</span>
        </div>
      </form>
    </div>
  </div>
</ion-content>

<!-- Footer -->
<ion-footer class="login-footer">
  <ion-toolbar color="light" class="py-2.5 text-center">
    <ion-text color="medium">
      <p class="my-0.5 text-xs">{{ 'login.footer.copyright' | translate }}</p>
      <p class="my-0.5 text-xs">
        <a href="#" class="text-primary mx-1.5 no-underline hover:underline">{{
          'login.footer.links.terms' | translate
        }}</a>
        •
        <a href="#" class="text-primary mx-1.5 no-underline hover:underline">{{
          'login.footer.links.privacy' | translate
        }}</a>
        •
        <a href="#" class="text-primary mx-1.5 no-underline hover:underline">{{
          'login.footer.links.support' | translate
        }}</a>
      </p>
    </ion-text>
  </ion-toolbar>
</ion-footer>
