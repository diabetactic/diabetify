<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="close()">
        <app-icon slot="icon-only" name="x"></app-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ 'settings.advanced.title' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="bg-gray-50 dark:bg-black">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ 'settings.advanced.title' | translate }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="mx-auto max-w-lg space-y-6 px-4 py-6">
    <!-- Developer Tools -->
    @if (isDevMode) {
      <section class="card overflow-hidden rounded-2xl bg-white shadow-sm dark:bg-gray-900">
        <div
          class="flex items-center gap-3 border-b border-gray-100 px-4 py-3 dark:border-gray-800"
        >
          <div
            class="bg-warning/10 text-warning flex h-8 w-8 items-center justify-center rounded-full"
          >
            <app-icon name="wrench" class="text-lg"></app-icon>
          </div>
          <h3 class="text-base-content m-0 text-base font-bold">
            {{ 'settings.advanced.developerTools' | translate }}
          </h3>
        </div>

        <div class="p-4">
          <div class="space-y-2">
            <ion-label
              class="mb-2 block text-sm font-medium uppercase tracking-wider text-gray-500"
            >
              {{ 'settings.advanced.accountStateToggle' | translate }}
            </ion-label>
            <div
              class="focus-within:border-primary rounded-xl border border-transparent bg-gray-50 px-3 transition-colors dark:bg-gray-800"
            >
              <ion-select
                [(ngModel)]="accountState"
                (ionChange)="onAccountStateChange($event)"
                [placeholder]="'settings.advanced.selectAccountState' | translate"
                interface="popover"
                class="text-base-content w-full"
              >
                <ion-select-option value="active">
                  {{ 'settings.advanced.accountState.active' | translate }}
                </ion-select-option>
                <ion-select-option value="disabled">
                  {{ 'settings.advanced.accountState.disabled' | translate }}
                </ion-select-option>
              </ion-select>
            </div>
          </div>
        </div>
      </section>
    }

    <!-- Data & Storage -->
    <section class="card overflow-hidden rounded-2xl bg-white shadow-sm dark:bg-gray-900">
      <div class="flex items-center gap-3 border-b border-gray-100 px-4 py-3 dark:border-gray-800">
        <div class="bg-error/10 text-error flex h-8 w-8 items-center justify-center rounded-full">
          <app-icon name="database" class="text-lg"></app-icon>
        </div>
        <h3 class="text-base-content m-0 text-base font-bold">
          {{ 'settings.advanced.dangerZone' | translate }}
        </h3>
      </div>

      <div class="divide-y divide-gray-100 dark:divide-gray-800">
        <!-- Clear Data -->
        <button
          class="flex w-full items-center justify-between px-4 py-4 transition-colors hover:bg-gray-50 active:bg-gray-100 dark:hover:bg-gray-800"
          (click)="clearLocalData()"
        >
          <div class="flex items-center gap-3">
            <app-icon name="trash-2" class="text-error text-xl"></app-icon>
            <div class="text-left">
              <span class="text-error block text-base font-medium">{{
                'settings.advanced.clearData' | translate
              }}</span>
              <span class="mt-0.5 block text-xs text-gray-500">{{
                'settings.advanced.clearDataConfirm' | translate
              }}</span>
            </div>
          </div>
          <app-icon name="chevron-right" class="text-gray-400"></app-icon>
        </button>
      </div>
    </section>

    <!-- Session -->
    <section class="card overflow-hidden rounded-2xl bg-white shadow-sm dark:bg-gray-900">
      <div class="divide-y divide-gray-100 dark:divide-gray-800">
        <!-- Sign Out -->
        <button
          class="flex w-full items-center justify-between px-4 py-4 transition-colors hover:bg-gray-50 active:bg-gray-100 dark:hover:bg-gray-800"
          (click)="signOut()"
        >
          <div class="flex items-center gap-3">
            <app-icon name="log-out" class="text-base-content text-xl"></app-icon>
            <span class="text-base-content text-base font-medium">{{
              'settings.advanced.signOut' | translate
            }}</span>
          </div>
          <app-icon name="chevron-right" class="text-gray-400"></app-icon>
        </button>
      </div>
    </section>
  </div>
</ion-content>
