/**
 * Readings Page Styles (Tailwind Migration - Batch 2)
 * SCSS reduced from 248 â†’ 74 lines (70% reduction)
 * Migrated to Tailwind CSS v4 utility classes
 */

// === Responsive Design ===
@media (width >= 768px) {
  .flex.items-center.justify-between.px-4.py-4.pb-2 {
    padding: 20px 24px 12px;
  }
}

/* Dark Mode Support (class-based for manual theme toggle) */

/* Filters container - triple-trigger pattern with hex fallbacks for Android WebView */
:host-context(.dark),
:host-context(.ion-palette-dark) {
  .flex.items-center.gap-2.px-4.py-3 {
    /* Hex fallback for Android WebView, oklch for modern browsers */
    background: #1e293b;
    border-bottom-color: rgba(255, 255, 255, 0.1);

    @supports (color: oklch(0.5 0.1 100)) {
      background: oklch(var(--b2));
      border-bottom-color: oklch(var(--bc) / 10%);
    }
  }

  /* Date header */
  .sticky.top-0.z-10 {
    /* Hex fallback for Android WebView, oklch for modern browsers */
    background: #0f172a;

    @supports (color: oklch(0.5 0.1 100)) {
      background: oklch(var(--b1));
    }
  }

  /* Reading cards */
  ion-card {
    /* Hex fallback for Android WebView compatibility */
    --background: #1e293b;

    border: 1px solid rgba(255, 255, 255, 0.1);

    @supports (color: oklch(0.5 0.1 100)) {
      --background: oklch(var(--b2));

      border: 1px solid oklch(var(--bc) / 10%);
    }
  }

  /* Modal list and items - proper dark backgrounds */
  ion-modal ion-list {
    background: var(--ion-card-background, #1e293b);
  }

  ion-modal ion-item {
    --background: var(--ion-card-background, #1e293b);
    --color: var(--dt-color-text-primary, #e5e7eb);

    ion-label h3 {
      color: var(--dt-color-text-primary, #e5e7eb);
    }

    ion-label p {
      color: var(--dt-color-text-muted, rgb(229 231 235 / 60%));
    }
  }

  /* Reading detail modal card */
  ion-modal .bg-base-100 {
    background: var(--ion-card-background, #1e293b);
  }
}

// === Accessibility ===
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms;
    animation-iteration-count: 1;
    transition-duration: 0.01ms;
  }
}

// === Print Styles ===
@media print {
  ion-fab,
  .flex.items-center.gap-2.px-4.py-3,
  ion-searchbar {
    display: none;
  }

  .mb-6 {
    page-break-inside: avoid;
  }
}

// === Ionic Component Overrides ===
// Fix for ion-searchbar in primary toolbar - white input background
ion-toolbar[color='primary'] ion-searchbar {
  --background: #fff;
  --color: var(--ion-color-dark, #0d1b2a);
  --placeholder-color: var(--ion-color-medium, #6b7280);
  --icon-color: var(--ion-color-medium, #6b7280);
  --clear-button-color: var(--ion-color-medium, #6b7280);
  --border-radius: 1rem;
}

/* Dark mode searchbar with hex fallbacks for Android WebView */
.dark ion-toolbar[color='primary'] ion-searchbar,
.ion-palette-dark ion-toolbar[color='primary'] ion-searchbar {
  /* Hex fallbacks for Android WebView compatibility */
  --background: #1e293b;
  --color: #f8fafc;
  --placeholder-color: rgba(248, 250, 252, 0.85);
  --icon-color: rgba(248, 250, 252, 0.85);
  --clear-button-color: rgba(248, 250, 252, 0.85);

  @supports (color: oklch(0.5 0.1 100)) {
    --background: oklch(var(--b2, 0.2 0 0));
    --color: oklch(var(--bc, 1 0 0));
    --placeholder-color: oklch(var(--bc, 1 0 0) / 85%);
    --icon-color: oklch(var(--bc, 1 0 0) / 85%);
    --clear-button-color: oklch(var(--bc, 1 0 0) / 85%);
  }
}

// Ensure proper FAB shadow rendering
ion-fab-button {
  --box-shadow: var(--shadow-08);
}

// Fix modal content padding
ion-modal ion-content.ion-padding {
  --padding-start: 16px;
  --padding-end: 16px;
  --padding-top: 16px;
  --padding-bottom: 16px;
}

// Preserve Ionic list styling in modal
ion-modal ion-list {
  background: var(--ion-item-background, var(--ion-background-color, #fff));
}

ion-modal ion-item {
  --background: var(--ion-item-background, var(--ion-background-color, #fff));
}
