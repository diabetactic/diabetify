/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Put style rules here that you want to apply globally. These styles are for
 * the entire app and not just one component. Additionally, this file can be
 * used as an entry point to import other CSS/Sass files to be included in the
 * output CSS.
 * For more information on global stylesheets, visit the documentation:
 * https://ionicframework.com/docs/layout/global-stylesheets
 */

/* ============================================
 * TAILWIND CSS V3 + DAISYUI
 * ============================================ */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
 * THEME CONFIGURATION (Tailwind v4)
 * ============================================ */
:root,
:root[data-theme='diabetactic'] {
  /* Diabetactic Theme (Light) */
  --color-primary: #3b82f6;
  --color-primary-content: #0f172a; /* contraste 4.8:1 sobre primary */
  --color-secondary: #00c6ae;
  --color-secondary-content: #0f172a; /* contraste 8.3:1 sobre secondary */
  --color-accent: #667eea;
  --color-accent-content: #fff;
  --color-neutral: #0d171c;
  --color-neutral-content: #fff;
  --color-base-100: #fff;
  --color-base-200: #f5f7f8;
  --color-base-300: #e5e7eb;
  --color-base-content: #0d171c;
  --color-info: #3b82f6;
  --color-info-content: #fff;
  --color-success: #22c55e;
  --color-success-content: #0f172a; /* contraste 8.8:1 sobre success */
  --color-warning: #f59e0b;
  --color-warning-content: #000;
  --color-error: #fca5a5;
  --color-error-content: #0f172a; /* contraste 8.9:1 sobre error (WCAG AA compliant) */

  /* Semantic app colors (light) */
  --dt-color-text-primary: #1f2937; /* slate-800 */
  --dt-color-text-secondary: #4b5563; /* slate-600 */
  --dt-color-text-muted: #6b7280; /* slate-500 */
  --dt-color-border-subtle: #e5e7eb;
  --dt-color-border-input: #d1d5db;
  --dt-color-link: #1d4ed8;
  --dt-color-link-soft: #93c5fd;
  --dt-color-surface: #fff;
  --dt-color-surface-soft: #f8fbff;

  /* Glucose status colors (light) */
  --glucose-normal: #22c55e;
  --glucose-low: #f59e0b;
  --glucose-high: #ef4444;
  --glucose-critical: #dc2626;

  /* Shadow tokens (auto-generated) */
  --shadow-01: 0 12px 24px rgb(37 175 244 / 20%);
  --shadow-02: 0 8px 16px rgb(0 0 0 / 15%);
  --shadow-03: 0 8px 16px rgb(10 31 68 / 8%);
  --shadow-04: 0 16px 32px rgb(10 31 68 / 12%);
  --shadow-05: 0 12px 24px rgb(10 31 68 / 9%);
  --shadow-06: 0 8px 16px oklch(var(--p) / 15%);
  --shadow-07: 0 6px 12px oklch(0% 0 0deg / 15%);
  --shadow-08: 0 4px 12px rgb(0 0 0 / 15%);
  --shadow-09: 0 12px 24px rgb(10 31 68 / 12%);
  --shadow-10: 0 4px 8px rgb(10 31 68 / 10%);
  --shadow-11: 0 4px 12px rgb(37 175 244 / 30%);
  --shadow-12: 0 6px 16px rgb(37 175 244 / 40%);
  --shadow-13: 0 8px 20px rgb(0 0 0 / 8%);
  --shadow-14: 0 12px 30px rgb(0 0 0 / 8%);
  --shadow-15: 0 0 0 3px rgb(59 130 246 / 15%);
  --shadow-16: 0 10px 18px rgb(79 139 255 / 28%);
  --shadow-17: none;
  --shadow-18: 0 12px 20px rgb(79 139 255 / 32%);
  --shadow-19: 0 14px 30px rgb(0 0 0 / 70%), 0 0 0 1px rgb(30 64 175 / 45%);
  --shadow-20: 0 8px 18px rgb(255 119 15 / 28%), 0 3px 8px rgb(0 0 0 / 8%);
  --shadow-21: 0 10px 20px rgb(255 119 15 / 32%), 0 4px 10px rgb(0 0 0 / 10%);
  --shadow-22: 0 8px 20px rgb(0 0 0 / 6%);
  --shadow-23: 0 12px 30px rgb(0 0 0 / 60%), 0 0 0 1px rgb(148 163 184 / 45%);
  --shadow-24: 0 14px 26px rgb(248 113 113 / 35%), 0 4px 10px rgb(0 0 0 / 40%);
  --shadow-25: 0 4px 12px rgb(10 31 68 / 8%);
  --shadow-26: 0 8px 20px rgb(10 31 68 / 12%);
  --shadow-27: 0 4px 8px rgb(10 31 68 / 6%);
  --shadow-28: 0 8px 16px rgb(10 31 68 / 10%);
  --shadow-29: 0 4px 16px oklch(0% 0 0deg / 30%), 0 0 0 1px oklch(var(--bc) / 5%);
  --shadow-30: 0 8px 24px oklch(0% 0 0deg / 40%), 0 0 0 1px oklch(var(--bc) / 8%);
  --shadow-31: 0 6px 18px oklch(0% 0 0deg / 32%), 0 0 0 1px oklch(var(--bc) / 8%);
  --shadow-32: 0 4px 12px oklch(0% 0 0deg / 30%);
  --shadow-33: 0 2px 8px oklch(0% 0 0deg / 8%);
  --shadow-34: 0 2px 8px oklch(0% 0 0deg / 6%);
  --shadow-35: 0 2px 8px oklch(0% 0 0deg / 30%);
  --shadow-36: 0 4px 12px oklch(var(--p) / 30%);
  --shadow-37: 0 8px 24px oklch(0% 0 0deg / 40%);
  --shadow-38: 0 8px 24px rgb(235 68 90 / 40%);
  --shadow-39: 0 6px 16px rgb(0 0 0 / 20%);

  /* Illustration shadows */
  --shadow-illustration-light: 0 8px 32px rgb(59 130 246 / 15%), 0 4px 12px rgb(0 0 0 / 8%);
  --shadow-illustration-dark: 0 8px 32px rgb(0 0 0 / 40%), 0 0 20px rgb(148 163 184 / 10%);

  /* Border radius tokens (smooth, not sharp) */
  --radius-xs: 0.25rem; /* 4px - tiny elements */
  --radius-sm: 0.5rem; /* 8px - badges, chips */
  --radius-md: 0.75rem; /* 12px - inputs, buttons */
  --radius-lg: 1rem; /* 16px - cards */
  --radius-xl: 1.5rem; /* 24px - large cards, modals */
  --radius-full: 9999px; /* pill shape */
}

.dark,
.ion-palette-dark {
  --color-neutral: #1e293b;
  --color-base-100: #101c22;
  --color-base-200: #1e293b;
  --color-base-300: #334155;
  --color-base-content: #fff;
}

/* ============================================
 * DARK MODE STRATEGY
 * ============================================
 * The application uses THREE dark mode triggers set simultaneously by ThemeService:
 *
 * 1. [data-theme='dark'] on <html> - Primary trigger for DaisyUI components
 *    This is the CANONICAL trigger for custom CSS.
 *
 * 2. .ion-palette-dark on <html> - Required for Ionic components
 *    Ionic's dark.class.css targets this class.
 *
 * 3. .dark on <body> and <html> - Tailwind/utility class
 *    Used by some Tailwind dark: utilities.
 *
 * USAGE IN SCSS FILES:
 * - For global selectors: Use grouped selector for robustness:
 *     :root[data-theme='dark'], .dark, .ion-palette-dark { ... }
 *
 * - For Angular component scoped styles: Use :host-context():
 *     :host-context(.dark),
 *     :host-context(.ion-palette-dark) { ... }
 *
 * - For simple cases, .dark alone works since all triggers are set.
 * ============================================ */

/* ============================================
 * DAISYUI → IONIC CSS VARIABLE BRIDGES
 * Sync DaisyUI theme colors to Ionic variables
 * ============================================ */
:root[data-theme='diabetactic'] {
  /* Bridge DaisyUI primary to Ionic primary */
  --ion-color-primary: #3b82f6;
  --ion-color-primary-rgb: 59, 130, 246;
  --ion-color-primary-contrast: #0f172a;
  --ion-color-primary-contrast-rgb: 15, 23, 42;
  --ion-color-primary-shade: #2563eb;
  --ion-color-primary-tint: #60a5fa;

  /* Bridge DaisyUI secondary to Ionic secondary */
  --ion-color-secondary: #00c6ae;
  --ion-color-secondary-rgb: 0, 198, 174;
  --ion-color-secondary-contrast: #0f172a;
  --ion-color-secondary-contrast-rgb: 15, 23, 42;
  --ion-color-secondary-shade: #00ae99;
  --ion-color-secondary-tint: #1accb6;

  /* Bridge DaisyUI success to Ionic success */
  --ion-color-success: #22c55e;
  --ion-color-success-rgb: 34, 197, 94;
  --ion-color-success-contrast: #0f172a;
  --ion-color-success-contrast-rgb: 15, 23, 42;
  --ion-color-success-shade: #1ead53;
  --ion-color-success-tint: #38cb6e;

  /* Bridge DaisyUI warning to Ionic warning */
  --ion-color-warning: #f59e0b;
  --ion-color-warning-rgb: 245, 158, 11;
  --ion-color-warning-contrast: #000;
  --ion-color-warning-contrast-rgb: 0, 0, 0;
  --ion-color-warning-shade: #d88b0a;
  --ion-color-warning-tint: #f6a823;

  /* Bridge DaisyUI error to Ionic danger */
  --ion-color-danger: #ef4444;
  --ion-color-danger-rgb: 239, 68, 68;
  --ion-color-danger-contrast: #0f172a;
  --ion-color-danger-contrast-rgb: 15, 23, 42;
  --ion-color-danger-shade: #d13c3c;
  --ion-color-danger-tint: #f05757;

  /* Background and surface colors */
  --ion-background-color: #fff;
  --ion-background-color-rgb: 255, 255, 255;
  --ion-text-color: #0d171c;
  --ion-text-color-rgb: 13, 23, 28;
  --ion-card-background: #fff;
}

:root[data-theme='dark'] {
  /* Bridge DaisyUI primary to Ionic primary (Desaturated/Lighter for Dark Mode - Blue-400) */
  --ion-color-primary: #60a5fa;
  --ion-color-primary-rgb: 96, 165, 250;
  --ion-color-primary-contrast: #000;
  --ion-color-primary-contrast-rgb: 0, 0, 0;
  --ion-color-primary-shade: #3b82f6;
  --ion-color-primary-tint: #93c5fd;

  /* Bridge DaisyUI secondary to Ionic secondary (Desaturated/Lighter - Teal-400) */
  --ion-color-secondary: #2dd4bf;
  --ion-color-secondary-rgb: 45, 212, 191;
  --ion-color-secondary-contrast: #000;
  --ion-color-secondary-contrast-rgb: 0, 0, 0;
  --ion-color-secondary-shade: #14b8a6;
  --ion-color-secondary-tint: #5eead4;

  /* Bridge DaisyUI success to Ionic success */
  --ion-color-success: #22c55e;
  --ion-color-success-rgb: 34, 197, 94;
  --ion-color-success-contrast: #fff;
  --ion-color-success-contrast-rgb: 255, 255, 255;
  --ion-color-success-shade: #1ead53;
  --ion-color-success-tint: #38cb6e;

  /* Bridge DaisyUI warning to Ionic warning */
  --ion-color-warning: #f59e0b;
  --ion-color-warning-rgb: 245, 158, 11;
  --ion-color-warning-contrast: #000;
  --ion-color-warning-contrast-rgb: 0, 0, 0;
  --ion-color-warning-shade: #d88b0a;
  --ion-color-warning-tint: #f6a823;

  /* Bridge DaisyUI error to Ionic danger (Lighter for dark mode - better contrast) */
  --ion-color-danger: #fca5a5;
  --ion-color-danger-rgb: 252, 165, 165;
  --ion-color-danger-contrast: #0f172a;
  --ion-color-danger-contrast-rgb: 15, 23, 42;
  --ion-color-danger-shade: #ef4444;
  --ion-color-danger-tint: #fecaca;

  /* Dark theme background and surface colors */
  --ion-background-color: #101c22;
  --ion-background-color-rgb: 16, 28, 34;
  --ion-text-color: #fff;
  --ion-text-color-rgb: 255, 255, 255;
  --ion-card-background: #1e293b;
  --ion-card-background-elevated: #334155; /* Slate-700 for elevation */

  /* Semantic app colors (dark) */
  --dt-color-text-primary: #e5e7eb;
  --dt-color-text-secondary: #cbd5f5;
  --dt-color-text-muted: #9ca3af;
  --dt-color-border-subtle: #334155;
  --dt-color-border-input: #475569;
  --dt-color-link: #bfdbfe;
  --dt-color-link-soft: #93c5fd;
  --dt-color-surface: rgb(15 23 42 / 96%);
  --dt-color-surface-soft: rgb(15 23 42 / 92%);

  /* Glucose status colors (dark - adjusted for better contrast) */
  --glucose-normal: #22c55e;
  --glucose-low: #f59e0b;
  --glucose-high: #fca5a5;
  --glucose-critical: #fecaca;
}

/* ============================================
 * DESIGN TOKEN SYSTEM (Tailwind v3 compatible)
 * Beautiful gradients, shadows, and semantic colors
 * Note: Converted from @theme to :root for v3 compatibility

/* ============================================
 * CUSTOM COMPONENT UTILITIES
 * Beautiful, semantic component classes
 * ============================================ */
@layer components {
  /* ========== CARDS ========== */

  /* Use DaisyUI card component: class="card bg-base-100 shadow-xl" */

  .card-gradient {
    background: var(--gradient-primary);

    @apply rounded-2xl p-6 text-white shadow-xl;
  }

  /* ========== BUTTONS ========== */
  .btn-glow {
    box-shadow: var(--shadow-glow-primary);

    @apply transition-all hover:scale-105 active:scale-95;
  }

  /* Enhanced button visibility in dark mode */
  .dark ion-button,
  .ion-palette-dark ion-button {
    --background: var(--ion-color-primary);
    --background-activated: var(--ion-color-primary-shade);
    --background-focused: var(--ion-color-primary-tint);
    --background-hover: var(--ion-color-primary-tint);
    --color: var(--ion-color-primary-contrast);
    --box-shadow: 0 2px 6px 0 rgb(0 0 0 / 40%);
  }

  /* Buttons with explicit color attributes keep their color */
  .dark ion-button[color],
  .ion-palette-dark ion-button[color] {
    --box-shadow: 0 2px 6px 0 rgb(0 0 0 / 40%);
  }

  /* Outline buttons in dark mode */
  .dark ion-button[fill='outline'],
  .ion-palette-dark ion-button[fill='outline'] {
    --border-color: var(--ion-color-primary);
    --border-width: 2px;
    --color: var(--ion-color-primary);
    --background: transparent;
    --background-hover: rgb(37 175 244 / 10%);
    --background-focused: rgb(37 175 244 / 10%);
  }

  /* Clear/text buttons in dark mode */
  .dark ion-button[fill='clear'],
  .ion-palette-dark ion-button[fill='clear'] {
    --color: var(--ion-color-primary);
    --background: transparent;
    --background-hover: rgb(37 175 244 / 10%);
    --background-focused: rgb(37 175 244 / 10%);
  }

  /* ========== FORM CONTROLS (THEME-AWARE) ========== */

  /* Consistent input border radius - 1rem (16px) to match card styling */
  ion-input,
  ion-select,
  ion-textarea,
  ion-searchbar {
    --border-radius: 1rem;
  }

  .input,
  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='number'],
  select,
  textarea {
    border-radius: 1rem;
  }

  /* Light theme - datetime components (hex fallbacks for Android WebView) */
  ion-datetime {
    --background: var(--color-base-100, #fff);
    --wheel-background: var(--color-base-100, #fff);
    --wheel-highlight-background: var(--color-base-200, #f5f7f8);
    --wheel-highlight-border-radius: 14px;
    --wheel-fade-background: linear-gradient(to bottom, transparent, rgb(0 0 0 / 3%), transparent);
    --title-color: var(--color-base-content, #0d171c);
    --subtitle-color: rgb(13 23 28 / 70%);
    --header-background: var(--color-base-100, #fff);
    --header-color: var(--color-base-content, #0d171c);
    --backdrop-opacity: 0.35;

    width: 100%;
    max-width: 100%;
    border-radius: 16px;
    box-shadow: var(--shadow-10, 0 12px 30px -10px rgb(0 0 0 / 20%));
    color: var(--color-base-content, #0d171c);
  }

  ion-datetime::part(calendar-day)[today] {
    color: var(--ion-color-primary);
    font-weight: 700;
  }

  ion-datetime::part(wheel-item) {
    font-weight: 600;
    width: 100%;

    /* Fix for numbers disappearing during scroll */
    will-change: transform;
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  ion-datetime-button {
    --background: var(--color-base-200, #f5f7f8);
    --color: var(--color-base-content, #0d171c);
    --padding-start: 12px;
    --padding-end: 12px;
    --padding-top: 10px;
    --padding-bottom: 10px;
    --border-color: rgb(13 23 28 / 12%);

    width: 100%;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    box-shadow: var(--shadow-06, 0 8px 18px -14px rgb(0 0 0 / 35%));
  }

  ion-datetime-button::part(native) {
    border-radius: 12px;
    padding: 0.35rem 0.75rem;
    font-weight: 600;
    letter-spacing: 0.01em;
    gap: 0.35rem;
  }

  /* Date picker in modal/popover context */
  ion-modal ion-datetime,
  ion-popover ion-datetime {
    width: 100%;
    max-width: 100%;
  }

  /* Date picker in cards */
  .card ion-datetime,
  ion-card ion-datetime {
    width: 100%;
    border-radius: 1rem;
  }

  ion-select {
    --background: var(--color-base-100, #fff);
    --color: var(--color-base-content, #0d171c);
    --placeholder-color: rgb(13 23 28 / 60%);
  }

  ion-action-sheet {
    --background: var(--color-base-100, #fff);
    --backdrop-opacity: 0.7;
    --button-background: var(--color-base-200, #f5f7f8);
    --button-background-selected: var(--color-base-300, #e5e7eb);
    --button-color: var(--color-base-content, #0d171c);
  }

  /* Dark theme overrides - hex fallbacks for Android WebView */
  :root[data-theme='dark'] ion-datetime,
  .dark ion-datetime,
  .ion-palette-dark ion-datetime {
    --background: var(--color-base-200, #252540);
    --wheel-background: var(--color-base-200, #252540);
    --wheel-highlight-background: var(--color-base-300, #3a3a55);
    --wheel-fade-background: linear-gradient(
      to bottom,
      transparent,
      rgb(255 255 255 / 4%),
      transparent
    );
    --title-color: var(--color-base-content, #e5e7eb);
    --subtitle-color: rgb(229 231 235 / 70%);
    --header-background: var(--color-base-200, #252540);
    --header-color: var(--color-base-content, #e5e7eb);

    border-radius: 16px;
    box-shadow: var(--shadow-11, 0 14px 30px -12px rgb(0 0 0 / 40%));
    color: var(--color-base-content, #e5e7eb);
  }

  :root[data-theme='dark'] ion-datetime-button,
  .dark ion-datetime-button,
  .ion-palette-dark ion-datetime-button {
    --background: var(--color-base-200, #252540);
    --color: var(--color-base-content, #e5e7eb);
    --border-color: rgb(229 231 235 / 14%);

    box-shadow: var(--shadow-08, 0 10px 24px -14px rgb(0 0 0 / 55%));
  }

  :root[data-theme='dark'] ion-select,
  .dark ion-select,
  .ion-palette-dark ion-select {
    --background: var(--diabetactic-surface-dark, #1e293b);
    --color: var(--color-base-content, #e5e7eb);
    --placeholder-color: rgb(229 231 235 / 60%);
  }

  /* Ion select interface (popover/alert) - Dark Mode */
  :root[data-theme='dark'] .select-interface-option,
  .dark .select-interface-option,
  .ion-palette-dark .select-interface-option {
    --background: var(--diabetactic-surface-dark, #1e293b);
    --background-hover: rgb(96 165 250 / 15%);
    --color: #e5e7eb;
  }

  :root[data-theme='dark'] ion-action-sheet,
  .dark ion-action-sheet,
  .ion-palette-dark ion-action-sheet {
    --background: var(--color-base-100, #1a1a2e);
    --backdrop-opacity: 0.7;
    --button-background: var(--color-base-200, #252540);
    --button-background-selected: var(--color-base-300, #3a3a55);
    --button-color: var(--color-base-content, #e5e7eb);
  }

  /* ========== PROSE / TYPOGRAPHY (Tailwind @typography) - hex fallbacks ========== */
  .prose {
    color: var(--color-base-content, #0d171c);
    max-width: 70ch;
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4 {
    color: var(--color-base-content, #0d171c);
    font-weight: 700;
    letter-spacing: -0.01em;
  }

  .prose a {
    color: var(--ion-color-primary);
    text-decoration: none;
    font-weight: 600;
  }

  .prose a:hover {
    text-decoration: underline;
  }

  .prose code {
    color: var(--color-base-content, #0d171c);
    background: var(--color-base-200, #f5f7f8);
    padding: 0.15rem 0.3rem;
    border-radius: 0.35rem;
  }

  .prose blockquote {
    border-left: 3px solid var(--ion-color-primary);
    padding-left: 1rem;
    color: rgb(13 23 28 / 80%);
  }

  /* ========== LAYOUT HELPERS ========== */
  .page-shell {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
    padding: 16px 16px 32px;
  }

  :root[data-theme='dark'] .prose,
  .dark .prose,
  .ion-palette-dark .prose {
    color: var(--color-base-content, #e5e7eb);
  }

  :root[data-theme='dark'] .prose code,
  .dark .prose code,
  .ion-palette-dark .prose code {
    background: var(--color-base-300, #3a3a55);
  }

  /* ========== TOOLBAR BUTTONS ========== */

  /* Make toolbar icon buttons circular and polished */

  /* Minimum touch target size: 44px (iOS) / 48px (Android) for accessibility */
  ion-toolbar ion-button {
    --border-radius: 50%;
    --padding-start: 8px;
    --padding-end: 8px;
    --padding-top: 8px;
    --padding-bottom: 8px;

    min-height: 44px;
    min-width: 44px;
  }

  ion-toolbar ion-buttons ion-button {
    --border-radius: 50%;
    --padding-start: 6px;
    --padding-end: 6px;

    margin: 0 2px;
  }

  /* Icon-only buttons in toolbar - circular with hover effect */
  ion-toolbar ion-button ion-icon[slot='icon-only'],
  ion-toolbar ion-button app-icon {
    font-size: 22px;
  }

  /* Hover/active states for toolbar buttons */
  ion-toolbar ion-button::part(native) {
    border-radius: 50%;
    transition:
      background-color 0.2s ease,
      transform 0.15s ease;
  }

  ion-toolbar ion-button:hover::part(native) {
    background: rgb(0 0 0 / 8%);
  }

  ion-toolbar ion-button:active::part(native) {
    transform: scale(0.92);
  }

  /* Dark mode toolbar buttons */
  .dark ion-toolbar ion-button:hover::part(native),
  .ion-palette-dark ion-toolbar ion-button:hover::part(native) {
    background: rgb(255 255 255 / 12%);
  }

  /* Primary colored toolbar - use contrast token for accessibility */
  ion-toolbar[color='primary'] {
    --color: var(--ion-color-primary-contrast);
  }

  ion-toolbar[color='primary'] ion-button {
    --color: var(--ion-color-primary-contrast);
  }

  ion-toolbar[color='primary'] ion-button:hover::part(native) {
    background: rgb(255 255 255 / 12%);
  }

  ion-toolbar[color='primary'] ion-button:active::part(native) {
    background: rgb(255 255 255 / 20%);
  }

  /* ========== SURFACES ========== */
  .glass-surface {
    background: var(--color-glass-light);

    @apply backdrop-blur-xl dark:bg-gray-900/95;

    border: 1px solid rgb(255 255 255 / 18%);
  }

  .gradient-surface {
    background: var(--gradient-primary);

    @apply text-white;
  }

  @media (width >= 640px) {
    .page-shell {
      padding: 20px 24px 36px;
    }
  }

  @media (width >= 1024px) {
    .page-shell {
      padding: 24px 28px 40px;
    }
  }
}

/* ============================================
 * ANIMATION UTILITIES (CENTRALIZED)
 * ============================================
 * All shared keyframes are defined here to avoid duplication.
 * Component SCSS files should use these central definitions via the utility classes.
 *
 * Available animations:
 * - .animate-fade-in        → fadeIn (0.6s)
 * - .animate-fade-in-down   → fadeInDown (0.8s)
 * - .animate-fade-in-up     → fadeInUp (0.8s)
 * - .animate-slide-up       → slideUp (0.5s)
 * - .animate-slide-in-up    → slideInUp (0.8s)
 * - .animate-pulse-glow     → pulseGlow (2s infinite)
 * - .animate-shake          → shake (0.3s)
 *
 * Note: Some component SCSS files have local keyframe definitions for component-specific
 * animations (e.g., spin, bounce, pulse). These are intentionally local for scoping.
 * ============================================ */
@layer utilities {
  /* Fade animations */
  .animate-fade-in {
    animation: fadeIn 0.6s ease-out;
  }

  .animate-fade-in-down {
    animation: fadeInDown 0.8s ease-out;
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out;
  }

  /* Slide animations */
  .animate-slide-up {
    animation: slideUp 0.5s ease-out;
  }

  .animate-slide-in-up {
    animation: slideInUp 0.8s ease-out;
  }

  /* Glow effect */
  .animate-pulse-glow {
    animation: pulseGlow 2s infinite;
  }

  /* Shake error */
  .animate-shake {
    animation: shake 0.3s ease;
  }
}

/* Keyframe definitions */
@keyframes fadeIn {
  from {
    opacity: 0%;
  }

  to {
    opacity: 100%;
  }
}

@keyframes fadeInDown {
  from {
    opacity: 0%;
    transform: translateY(-30px);
  }

  to {
    opacity: 100%;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0%;
    transform: translateY(30px);
  }

  to {
    opacity: 100%;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0%;
  }

  to {
    transform: translateY(0);
    opacity: 100%;
  }
}

@keyframes slideInUp {
  from {
    opacity: 0%;
    transform: translateY(30px);
  }

  to {
    opacity: 100%;
    transform: translateY(0);
  }
}

@keyframes pulseGlow {
  0%,
  100% {
    box-shadow: 0 0 20px rgb(37 175 244 / 30%);
  }

  50% {
    box-shadow: 0 0 40px rgb(37 175 244 / 60%);
  }
}

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }

  25% {
    transform: translateX(-5px);
  }

  75% {
    transform: translateX(5px);
  }
}

/* List item entrance animation with stagger support */
@keyframes listItemEnter {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-list-enter {
  animation: listItemEnter 0.3s ease-out forwards;
  opacity: 0;
}

/* Stagger delays for list items (use with ngFor index) */
.stagger-1 {
  animation-delay: 0.05s;
}
.stagger-2 {
  animation-delay: 0.1s;
}
.stagger-3 {
  animation-delay: 0.15s;
}
.stagger-4 {
  animation-delay: 0.2s;
}
.stagger-5 {
  animation-delay: 0.25s;
}
.stagger-6 {
  animation-delay: 0.3s;
}
.stagger-7 {
  animation-delay: 0.35s;
}
.stagger-8 {
  animation-delay: 0.4s;
}
.stagger-9 {
  animation-delay: 0.45s;
}
.stagger-10 {
  animation-delay: 0.5s;
}

/* Card scale-in animation for dashboard */
@keyframes cardScaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-card-enter {
  animation: cardScaleIn 0.25s ease-out forwards;
  opacity: 0;
}

/* Success checkmark animation */
@keyframes successPop {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-success {
  animation: successPop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

/* Smooth skeleton fade-out */
@keyframes skeletonFadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animate-skeleton-exit {
  animation: skeletonFadeOut 0.2s ease-out forwards;
}

/* Material Design Theme - Import after Tailwind for proper cascade */

/* @import './theme/material-theme'; */

/* Removed - file doesn't exist */

/* Core CSS required for Ionic components to work properly */
@import '@ionic/angular/css/core.css';

/* Basic CSS for apps built with Ionic */
@import '@ionic/angular/css/normalize.css';
@import '@ionic/angular/css/structure.css';
@import '@ionic/angular/css/typography.css';
@import '@ionic/angular/css/display.css';

/* Optional CSS utils that can be commented out */
@import '@ionic/angular/css/padding.css';
@import '@ionic/angular/css/float-elements.css';
@import '@ionic/angular/css/text-alignment.css';
@import '@ionic/angular/css/text-transformation.css';
@import '@ionic/angular/css/flex-utils.css';

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* @import "@ionic/angular/css/palettes/dark.always.css"; */

/* Use class-based dark mode for proper theme control */
@import '@ionic/angular/css/palettes/dark.class.css';

/* @import '@ionic/angular/css/palettes/dark.system.css'; */

/**
 * Global Diabetactic Styles
 * -----------------------------------------------------
 * Child-friendly global styles
 */

/* Set Be Vietnam Pro as the default font family with Roboto as fallback */
body {
  font-family: 'Be Vietnam Pro', 'Roboto', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Prevent iOS font scaling */
  text-size-adjust: 100%;
}

/* Apply Material Design background and text colors */
html,
body {
  height: 100%;
  margin: 0;
}

/* Dark mode cards - clear differentiation from background */
.dark ion-card,
.ion-palette-dark ion-card,
:root[data-theme='dark'] ion-card {
  --background: var(--ion-card-background);

  background: var(--ion-card-background);
  border: 1px solid var(--dt-color-border-subtle);
  box-shadow: var(--shadow-08);
}

/* ============================================
 * VISUAL DIFFERENTIATION UTILITIES
 * Clear element separation without harsh borders
 * ============================================ */

/* Card with subtle border and soft shadow - light mode optimized */
.card-subtle {
  background: oklch(var(--b1));
  border: 1px solid oklch(var(--bc) / 8%);
  border-radius: var(--radius-md, 1rem);
  box-shadow: 0 1px 3px oklch(var(--bc) / 6%);
}

.dark .card-subtle,
.ion-palette-dark .card-subtle,
:root[data-theme='dark'] .card-subtle {
  background: oklch(var(--b2));
  border: 1px solid oklch(var(--bc) / 12%);
  box-shadow: 0 4px 16px oklch(0% 0 0deg / 30%);
}

/* Elevated card with enhanced shadow - for floating elements */
.card-elevated {
  background: oklch(var(--b1));
  border: 1px solid oklch(var(--bc) / 6%);
  border-radius: var(--radius-lg, 1.25rem);
  box-shadow:
    0 4px 6px oklch(var(--bc) / 5%),
    0 10px 20px oklch(var(--bc) / 8%);
}

.dark .card-elevated,
.ion-palette-dark .card-elevated,
:root[data-theme='dark'] .card-elevated {
  background: oklch(var(--b2));
  border: 1px solid oklch(var(--bc) / 15%);
  box-shadow:
    0 4px 8px oklch(0% 0 0deg / 20%),
    0 12px 28px oklch(0% 0 0deg / 35%);
}

/* Separator/Divider - consistent line between sections */
.separator {
  height: 1px;
  background: oklch(var(--bc) / 10%);
  margin: 1rem 0;
}

.dark .separator,
.ion-palette-dark .separator,
:root[data-theme='dark'] .separator {
  background: oklch(var(--bc) / 15%);
}

/* Section divider with more spacing */
.section-divider {
  height: 1px;
  background: oklch(var(--bc) / 8%);
  margin: 1.5rem 0;
}

.dark .section-divider,
.ion-palette-dark .section-divider,
:root[data-theme='dark'] .section-divider {
  background: oklch(var(--bc) / 12%);
}

/* List item hover state - subtle highlight */
.list-item-hover {
  transition: background-color 0.15s ease;
}

.list-item-hover:hover {
  background: oklch(var(--bc) / 4%);
}

.dark .list-item-hover:hover,
.ion-palette-dark .list-item-hover:hover,
:root[data-theme='dark'] .list-item-hover:hover {
  background: oklch(var(--bc) / 8%);
}

/* Reset ion-item to transparent with zero padding */
.ion-item-reset {
  --padding-start: 0;
  --padding-end: 0;
  --inner-padding-start: 0;
  --inner-padding-end: 0;
  --background: transparent;
}

/* Elevated card style with consistent shadow */
.ion-card-elevated {
  border-radius: var(--radius-lg, 1.25rem);
  box-shadow: var(--shadow-card);
}

/* Card with no shadow/border for flat layouts */
.ion-card-flat {
  --background: transparent;

  box-shadow: none;
  border: none;
}

/* ============================================
 * TEXT COLOR UTILITIES (DARK MODE AWARE)
 * ============================================ */
.text-dark {
  color: var(--ion-color-dark, #0d1b2a);
}

.text-medium {
  color: var(--ion-color-medium, #6b7280);
}

/* Dark mode overrides for text utilities */
.dark .text-dark,
.ion-palette-dark .text-dark,
:root[data-theme='dark'] .text-dark {
  color: #fff;
}

.dark .text-medium,
.ion-palette-dark .text-medium,
:root[data-theme='dark'] .text-medium {
  color: #9ca3af;
}

/* Typography System with Responsive Sizing */
h1 {
  font-size: 32px;
  font-weight: 700;
  letter-spacing: -0.015em;
}

h2 {
  font-size: 22px;
  font-weight: 700;
  letter-spacing: -0.015em;
}

h3 {
  font-size: 20px;
  font-weight: 500;
}

h4 {
  font-size: 18px;
  font-weight: 500;
}

p,
.body-text {
  font-size: 16px;
  font-weight: 400;
  letter-spacing: 0.015em;
}

.small-text {
  font-size: 14px;
  font-weight: 400;
}

/* Responsive Typography for Mobile */
@media (width <= 480px) {
  h1 {
    font-size: 26px;
  }

  h2 {
    font-size: 20px;
  }

  h3 {
    font-size: 18px;
  }

  h4 {
    font-size: 16px;
  }

  p,
  .body-text {
    font-size: 15px;
  }

  .small-text {
    font-size: 13px;
  }
}

/* Prevent iOS font scaling on landscape rotation */
html {
  text-size-adjust: 100%;
}

/* Accessibility: Respect reduced motion preferences globally */
/* stylelint-disable declaration-no-important -- Required for a11y override */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
/* stylelint-enable declaration-no-important */

/* ============================================
 * ACCESSIBILITY: FOCUS INDICATORS
 * Keyboard navigation support (WCAG 2.1 AA)
 * ============================================ */

/* Global focus-visible indicator for keyboard navigation */
*:focus-visible {
  outline: 2px solid var(--ion-color-primary);
  outline-offset: 2px;
}

/* Enhanced focus for Ionic components */
ion-button:focus-visible::part(native),
ion-input:focus-visible,
ion-select:focus-visible,
ion-toggle:focus-visible {
  outline: 2px solid var(--ion-color-primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
}

/* Focus for interactive elements */
a:focus-visible,
button:focus-visible {
  outline: 2px solid var(--ion-color-primary);
  outline-offset: 2px;
}

/* Material Symbols Outlined configuration */
.material-symbols-outlined {
  font-variation-settings:
    'FILL' 0,
    'wght' 400,
    'GRAD' 0,
    'opsz' 24;
}

/* ============================================
 * ICON UTILITIES
 * Consistent sizing and styling for icons
 * ============================================ */

/* Icon sizes */
.icon-xs {
  width: 14px;
  height: 14px;
  font-size: 14px;
}

.icon-sm {
  width: 16px;
  height: 16px;
  font-size: 16px;
}

.icon-md {
  width: 20px;
  height: 20px;
  font-size: 20px;
}

.icon-lg {
  width: 24px;
  height: 24px;
  font-size: 24px;
}

.icon-xl {
  width: 32px;
  height: 32px;
  font-size: 32px;
}

/* Icon color states */
.icon-primary {
  color: oklch(var(--p));
}

.icon-secondary {
  color: oklch(var(--s));
}

.icon-muted {
  color: oklch(var(--bc) / 50%);
}

.icon-success {
  color: oklch(var(--su));
}

.icon-warning {
  color: oklch(var(--wa));
}

.icon-error {
  color: oklch(var(--er));
}

/* Dark mode icon adjustments for better visibility */
.dark .icon-muted,
.ion-palette-dark .icon-muted,
:root[data-theme='dark'] .icon-muted {
  color: oklch(var(--bc) / 60%);
}

/* Common component styles */
.stat-card-gradient {
  background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
}

.glucose-emoji {
  font-size: 24px;
  margin-right: 8px;
}

.status-badge {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--dt-color-text-primary); /* texto neutro para máximo contraste */
  border: 1px solid transparent;

  &.normal {
    background-color: rgba(var(--ion-color-success-rgb), 0.12);
    border-color: var(--glucose-normal);
  }

  &.low {
    background-color: rgba(var(--ion-color-warning-rgb), 0.12);
    border-color: var(--glucose-low);
  }

  &.high {
    background-color: rgba(var(--ion-color-danger-rgb), 0.12);
    border-color: var(--glucose-high);
  }
}

/* FAB button centering for navigation */
.center-fab {
  left: 50%;
  transform: translateX(-50%);
  margin-bottom: -8px;

  ion-fab-button {
    --background: var(--ion-color-primary);
    --background-activated: var(--ion-color-primary-shade);
    --background-focused: var(--ion-color-primary-shade);
    --background-hover: var(--ion-color-primary-tint);
    --border-radius: 50%;
    --box-shadow: 0 4px 12px rgb(37 175 244 / 30%);

    width: 64px;
    height: 64px;

    /* Ensure perfectly round with no square artifacts */
    border-radius: 50%;
    overflow: hidden;

    &::part(native) {
      border-radius: 50%;
      overflow: hidden;
    }
  }
}

/* Dark mode adjustments - class-based (not media query) */

/* These styles are applied via .ion-palette-dark from dark.class.css */

.dark ion-card-header,
:root[data-theme='dark'] ion-card-header {
  color: #fff;
}

.ion-palette-dark ion-card-title,
.dark ion-card-title,
:root[data-theme='dark'] ion-card-title {
  --color: #fff;

  color: #fff;
}

.ion-palette-dark ion-card-subtitle,
.dark ion-card-subtitle,
:root[data-theme='dark'] ion-card-subtitle {
  --color: rgb(255 255 255 / 80%);

  color: rgb(255 255 255 / 80%);
}

.ion-palette-dark ion-card-content,
.dark ion-card-content,
:root[data-theme='dark'] ion-card-content {
  --color: #fff;

  color: #fff;
}

/* Ion Item - Dark Mode */
.ion-palette-dark ion-item,
.dark ion-item,
:root[data-theme='dark'] ion-item {
  --background: var(--diabetactic-surface-dark, #1e293b);
  --color: #fff;
  --border-color: rgb(255 255 255 / 10%);
}

.ion-palette-dark ion-label,
.dark ion-label,
:root[data-theme='dark'] ion-label {
  --color: #fff;

  color: #fff;
}

/* Ion List - Dark Mode */
.ion-palette-dark ion-list,
.dark ion-list,
:root[data-theme='dark'] ion-list {
  --background: transparent;

  background: transparent;
}

/* Ion Content - Dark Mode */
.ion-palette-dark ion-content,
.dark ion-content,
:root[data-theme='dark'] ion-content {
  --background: var(--diabetactic-background-dark, #101c22);
}

/* Ion Toolbar - Dark Mode */
.ion-palette-dark ion-toolbar,
.dark ion-toolbar,
:root[data-theme='dark'] ion-toolbar {
  --background: var(--ion-color-primary);
  --color: #fff;
}

/* Ion Input/Textarea - Dark Mode */
.ion-palette-dark ion-input,
.ion-palette-dark ion-textarea,
.dark ion-input,
.dark ion-textarea,
:root[data-theme='dark'] ion-input,
:root[data-theme='dark'] ion-textarea {
  --color: #fff;
  --placeholder-color: oklch(var(--bc) / 60%);
  --background: var(--diabetactic-surface-dark, #1e293b);
}

/* Native input/textarea elements inside Ionic components - Dark Mode */
.ion-palette-dark ion-input input,
.ion-palette-dark ion-input .native-input,
.ion-palette-dark ion-textarea textarea,
.ion-palette-dark ion-textarea .native-textarea,
.dark ion-input input,
.dark ion-input .native-input,
.dark ion-textarea textarea,
.dark ion-textarea .native-textarea,
:root[data-theme='dark'] ion-input input,
:root[data-theme='dark'] ion-input .native-input,
:root[data-theme='dark'] ion-textarea textarea,
:root[data-theme='dark'] ion-textarea .native-textarea {
  background-color: var(--diabetactic-surface-dark, #1e293b) !important;
  color: #fff !important;
  -webkit-text-fill-color: #fff !important;
}

/* Native HTML input/select/textarea elements - Dark Mode */
.ion-palette-dark input:not([type='range']):not([type='checkbox']):not([type='radio']),
.ion-palette-dark select,
.ion-palette-dark textarea,
.dark input:not([type='range']):not([type='checkbox']):not([type='radio']),
.dark select,
.dark textarea,
:root[data-theme='dark'] input:not([type='range']):not([type='checkbox']):not([type='radio']),
:root[data-theme='dark'] select,
:root[data-theme='dark'] textarea {
  background-color: #1e293b !important;
  color: #e5e7eb !important;
  border-color: #475569 !important;
}

.ion-palette-dark input::placeholder,
.ion-palette-dark textarea::placeholder,
.dark input::placeholder,
.dark textarea::placeholder,
:root[data-theme='dark'] input::placeholder,
:root[data-theme='dark'] textarea::placeholder {
  color: #9ca3af !important;
  opacity: 1 !important;
}

/* Ion Segment - Dark Mode */
.ion-palette-dark ion-segment,
.dark ion-segment,
:root[data-theme='dark'] ion-segment {
  --background: var(--diabetactic-surface-dark, #1e293b);
}

.ion-palette-dark ion-segment-button,
.dark ion-segment-button,
:root[data-theme='dark'] ion-segment-button {
  --color: rgb(255 255 255 / 70%);
  --color-checked: #fff;
  --indicator-color: var(--ion-color-primary);
}

/* Ion Modal - Dark Mode */
.ion-palette-dark ion-modal,
.dark ion-modal,
:root[data-theme='dark'] ion-modal {
  --background: var(--ion-background-color);
}

.ion-palette-dark .modal-wrapper,
.dark .modal-wrapper,
:root[data-theme='dark'] .modal-wrapper {
  --background: var(--ion-background-color);
}

/* Ion Alert - Dark Mode */
.ion-palette-dark ion-alert,
.dark ion-alert,
:root[data-theme='dark'] ion-alert {
  --background: var(--ion-card-background);
  --backdrop-opacity: 0.6;
}

.ion-palette-dark .alert-wrapper,
.dark .alert-wrapper,
:root[data-theme='dark'] .alert-wrapper {
  --background: var(--ion-card-background);
}

.ion-palette-dark .alert-input,
.dark .alert-input,
:root[data-theme='dark'] .alert-input {
  background-color: var(--diabetactic-surface-dark, #1e293b) !important;
  color: #e5e7eb !important;
  border: 1px solid var(--dt-color-border-input) !important;
}

.ion-palette-dark .alert-radio-label,
.ion-palette-dark .alert-checkbox-label,
.dark .alert-radio-label,
.dark .alert-checkbox-label,
:root[data-theme='dark'] .alert-radio-label,
:root[data-theme='dark'] .alert-checkbox-label {
  color: var(--dt-color-text-primary);
}

/* Ion Popover - Dark Mode */
.ion-palette-dark ion-popover,
.dark ion-popover,
:root[data-theme='dark'] ion-popover {
  --background: var(--ion-card-background);
  --box-shadow: var(--shadow-08);
}

.ion-palette-dark .popover-content,
.dark .popover-content,
:root[data-theme='dark'] .popover-content {
  --background: var(--ion-card-background);
}

/* Ion Searchbar - Dark Mode */
.ion-palette-dark ion-searchbar,
.dark ion-searchbar,
:root[data-theme='dark'] ion-searchbar {
  --background: var(--diabetactic-surface-dark, #1e293b);
  --color: #e5e7eb;
  --placeholder-color: #9ca3af;
  --icon-color: #9ca3af;
  --clear-button-color: #9ca3af;
  --cancel-button-color: var(--ion-color-primary);
}

.ion-palette-dark ion-searchbar .searchbar-input,
.dark ion-searchbar .searchbar-input,
:root[data-theme='dark'] ion-searchbar .searchbar-input {
  background: var(--diabetactic-surface-dark, #1e293b) !important;
  color: #e5e7eb !important;
  border: 1px solid var(--dt-color-border-input);
}

/* ============================================
 * MOBILE PREVIEW FRAME (Desktop Web Only)
 * Shows app in phone-sized container on Vercel/web
 * ============================================ */
/* stylelint-disable declaration-no-important */
@media (width >= 768px) {
  html,
  body {
    background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%) !important;
    min-height: 100vh;
    margin: 0;
    padding: 0;
  }

  ion-app {
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    width: 375px !important;
    max-width: 375px !important;
    height: calc(100vh - 80px) !important;
    max-height: 812px !important;
    min-height: 600px !important;
    border-radius: 40px !important;
    overflow: hidden !important;
    box-shadow:
      0 25px 50px -12px rgb(0 0 0 / 25%),
      0 0 0 1px rgb(0 0 0 / 5%) !important;
    border: 8px solid #1f2937 !important;
  }

  /* Notch simulation */
  ion-app::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 120px;
    height: 28px;
    background: #1f2937;
    border-radius: 0 0 20px 20px;
    z-index: 9999;
  }

  /* Dark mode background */
  :root[data-theme='dark'] html,
  :root[data-theme='dark'] body,
  .dark html,
  .dark body,
  .ion-palette-dark html,
  .ion-palette-dark body {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%) !important;
  }

  :root[data-theme='dark'] ion-app,
  .dark ion-app,
  .ion-palette-dark ion-app {
    border-color: #374151 !important;
  }

  :root[data-theme='dark'] ion-app::before,
  .dark ion-app::before,
  .ion-palette-dark ion-app::before {
    background: #374151;
  }
}
/* stylelint-enable declaration-no-important */
