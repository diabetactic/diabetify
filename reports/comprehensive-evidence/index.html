<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diabetify - Comprehensive Evidence Report</title>
    <style>
      :root {
        --primary: #3b82f6;
        --success: #22c55e;
        --warning: #f59e0b;
        --bg: #0f172a;
        --card-bg: #1e293b;
        --text: #f8fafc;
        --text-muted: #94a3b8;
        --border: #334155;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: var(--bg);
        color: var(--text);
        line-height: 1.6;
        padding: 2rem;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        padding: 3rem 0;
        border-bottom: 1px solid var(--border);
        margin-bottom: 3rem;
      }

      h1 {
        font-size: 2.5rem;
        background: linear-gradient(135deg, var(--primary), #8b5cf6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 0.5rem;
      }

      .subtitle {
        color: var(--text-muted);
        font-size: 1.1rem;
      }

      .timestamp {
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        background: var(--card-bg);
        border-radius: 0.5rem;
        display: inline-block;
        font-size: 0.9rem;
      }

      .summary-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 3rem;
      }

      .summary-card {
        background: var(--card-bg);
        padding: 1.5rem;
        border-radius: 1rem;
        text-align: center;
        border: 1px solid var(--border);
      }

      .summary-card .number {
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--primary);
      }

      .summary-card .label {
        color: var(--text-muted);
        font-size: 0.9rem;
      }

      section {
        background: var(--card-bg);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        border: 1px solid var(--border);
      }

      h2 {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 2px solid var(--primary);
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      h3 {
        font-size: 1.2rem;
        margin: 1.5rem 0 1rem;
        color: var(--text-muted);
      }

      .badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
      }

      .badge-success {
        background: rgba(34, 197, 94, 0.2);
        color: var(--success);
      }
      .badge-warning {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
      }
      .badge-info {
        background: rgba(59, 130, 246, 0.2);
        color: var(--primary);
      }

      .screenshot-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
      }

      .screenshot-card {
        background: var(--bg);
        border-radius: 0.75rem;
        overflow: hidden;
        border: 1px solid var(--border);
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      .screenshot-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
      }

      .screenshot-card img {
        width: 100%;
        height: 400px;
        object-fit: contain;
        background: #000;
        cursor: pointer;
      }

      .screenshot-card .caption {
        padding: 1rem;
        font-size: 0.9rem;
        color: var(--text-muted);
      }

      .flow-container {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        align-items: flex-start;
      }

      .flow-step {
        flex: 1;
        min-width: 280px;
        background: var(--bg);
        border-radius: 0.75rem;
        overflow: hidden;
        border: 1px solid var(--border);
      }

      .flow-step .step-header {
        background: var(--primary);
        color: white;
        padding: 0.75rem 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .flow-step .step-number {
        background: rgba(255, 255, 255, 0.2);
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
      }

      .flow-step img {
        width: 100%;
        height: 350px;
        object-fit: contain;
        background: #000;
      }

      .flow-step .description {
        padding: 1rem;
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .arrow {
        font-size: 2rem;
        color: var(--primary);
        align-self: center;
      }

      .info-box {
        background: rgba(59, 130, 246, 0.1);
        border-left: 4px solid var(--primary);
        padding: 1rem 1.5rem;
        border-radius: 0 0.5rem 0.5rem 0;
        margin: 1rem 0;
      }

      .info-box h4 {
        color: var(--primary);
        margin-bottom: 0.5rem;
      }

      .success-box {
        background: rgba(34, 197, 94, 0.1);
        border-left: 4px solid var(--success);
        padding: 1rem 1.5rem;
        border-radius: 0 0.5rem 0.5rem 0;
        margin: 1rem 0;
      }

      .success-box h4 {
        color: var(--success);
        margin-bottom: 0.5rem;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 1rem 0;
      }

      th,
      td {
        padding: 0.75rem 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border);
      }

      th {
        background: var(--bg);
        color: var(--text-muted);
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        cursor: pointer;
      }

      .modal img {
        max-width: 95%;
        max-height: 95%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 0.5rem;
      }

      .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        color: white;
        font-size: 2rem;
        cursor: pointer;
      }

      footer {
        text-align: center;
        padding: 2rem;
        color: var(--text-muted);
        border-top: 1px solid var(--border);
        margin-top: 2rem;
      }

      @media (max-width: 768px) {
        body {
          padding: 1rem;
        }
        h1 {
          font-size: 1.8rem;
        }
        .screenshot-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Diabetify - Evidence Report</h1>
        <p class="subtitle">Comprehensive E2E Testing & Feature Documentation</p>
        <div class="timestamp">Generated: January 19, 2026 at 05:06 AM (America/Buenos_Aires)</div>
      </header>

      <div class="summary-cards">
        <div class="summary-card">
          <div class="number">34</div>
          <div class="label">Screenshots Captured</div>
        </div>
        <div class="summary-card">
          <div class="number">3</div>
          <div class="label">Theme Modes Tested</div>
        </div>
        <div class="summary-card">
          <div class="number">10</div>
          <div class="label">Screens Documented</div>
        </div>
        <div class="summary-card">
          <div class="number">100%</div>
          <div class="label">Core Features Verified</div>
        </div>
      </div>

      <!-- READING ADDITION FLOW -->
      <section>
        <h2>Reading Addition E2E Flow <span class="badge badge-success">Verified</span></h2>

        <div class="success-box">
          <h4>Test Result: PASSED</h4>
          <p>
            Successfully added glucose reading of <strong>135 mg/dL</strong>. Dashboard updated to
            show 3 total readings with average of 127.5 mg/dL. Sync completed with 0 pending items.
          </p>
        </div>

        <div class="flow-container">
          <div class="flow-step">
            <div class="step-header">
              <span class="step-number">1</span> Before: Dashboard State
            </div>
            <img
              src="backend-proof/01-dashboard-before-reading.png"
              alt="Dashboard before reading"
              onclick="openModal(this)"
            />
            <div class="description">Initial state showing 2 existing readings</div>
          </div>
          <span class="arrow">→</span>
          <div class="flow-step">
            <div class="step-header">
              <span class="step-number">2</span> Adding Reading: 135 mg/dL
            </div>
            <img
              src="backend-proof/02-add-reading-filled.png"
              alt="Add reading form"
              onclick="openModal(this)"
            />
            <div class="description">Filling in glucose value: 135 mg/dL</div>
          </div>
          <span class="arrow">→</span>
          <div class="flow-step">
            <div class="step-header"><span class="step-number">3</span> Saved Confirmation</div>
            <img
              src="backend-proof/03-reading-saved.png"
              alt="Reading saved"
              onclick="openModal(this)"
            />
            <div class="description">Reading saved successfully</div>
          </div>
        </div>

        <div class="flow-container" style="margin-top: 1rem">
          <div class="flow-step">
            <div class="step-header">
              <span class="step-number">4</span> After: Dashboard Updated
            </div>
            <img
              src="backend-proof/04-dashboard-after-reading.png"
              alt="Dashboard after reading"
              onclick="openModal(this)"
            />
            <div class="description">Dashboard now shows 3 readings, average 127.5 mg/dL</div>
          </div>
          <span class="arrow">→</span>
          <div class="flow-step">
            <div class="step-header"><span class="step-number">5</span> Sync Complete</div>
            <img src="backend-proof/05-after-sync.png" alt="After sync" onclick="openModal(this)" />
            <div class="description">0 elementos pending - data synced to backend</div>
          </div>
        </div>

        <table>
          <tr>
            <th>Metric</th>
            <th>Before</th>
            <th>After</th>
            <th>Status</th>
          </tr>
          <tr>
            <td>Total Readings</td>
            <td>2</td>
            <td>3</td>
            <td><span class="badge badge-success">Updated</span></td>
          </tr>
          <tr>
            <td>Average Glucose</td>
            <td>120 mg/dL</td>
            <td>127.5 mg/dL</td>
            <td><span class="badge badge-success">Calculated</span></td>
          </tr>
          <tr>
            <td>Pending Sync</td>
            <td>-</td>
            <td>0 elementos</td>
            <td><span class="badge badge-success">Synced</span></td>
          </tr>
        </table>
      </section>

      <!-- APPOINTMENTS FLOW -->
      <section>
        <h2>Appointment State Flow <span class="badge badge-success">Documented</span></h2>

        <div class="info-box">
          <h4>Appointment States</h4>
          <p>
            PENDING → ACCEPTED → CREATED → RESOLVED (with full medical resolution including insulin
            protocols)
          </p>
        </div>

        <div class="screenshot-grid">
          <div class="screenshot-card">
            <img
              src="appointments-flow/01-appointments-list.png"
              alt="Appointments list"
              onclick="openModal(this)"
            />
            <div class="caption">
              Appointments list showing multiple appointments with different states
            </div>
          </div>
          <div class="screenshot-card">
            <img
              src="appointments-flow/02-appointments-scrolled.png"
              alt="Appointments scrolled"
              onclick="openModal(this)"
            />
            <div class="caption">Scrolled view showing additional appointments</div>
          </div>
        </div>

        <div class="info-box" style="margin-top: 1.5rem">
          <h4>Cita #135 - Resolution Details</h4>
          <ul style="margin-top: 0.5rem; padding-left: 1.5rem">
            <li><strong>Basal Insulin:</strong> Lantus 12 U at 22:00</li>
            <li><strong>Rapid Insulin:</strong> Humalog, Ratio 1:10, Sensitivity 45</li>
            <li><strong>Requires In-Person Visit:</strong> Yes</li>
            <li><strong>State Timeline:</strong> Pendiente → Aceptada → Creada → Resuelta</li>
          </ul>
        </div>
      </section>

      <!-- LIGHT MODE -->
      <section>
        <h2>Light Mode <span class="badge badge-info">10 Screens</span></h2>
        <div class="screenshot-grid">
          <div class="screenshot-card">
            <img
              src="light/01-dashboard-light.png"
              alt="Dashboard - Light"
              onclick="openModal(this)"
            />
            <div class="caption">Dashboard - Overview with glucose stats and recent readings</div>
          </div>
          <div class="screenshot-card">
            <img src="light/02-readings.png" alt="Readings - Light" onclick="openModal(this)" />
            <div class="caption">Readings List - All glucose measurements</div>
          </div>
          <div class="screenshot-card">
            <img
              src="light/03-appointments.png"
              alt="Appointments - Light"
              onclick="openModal(this)"
            />
            <div class="caption">Appointments - Medical consultations</div>
          </div>
          <div class="screenshot-card">
            <img src="light/04-profile.png" alt="Profile - Light" onclick="openModal(this)" />
            <div class="caption">Profile - User information and health data</div>
          </div>
          <div class="screenshot-card">
            <img
              src="light/05-add-reading-modal.png"
              alt="Add Reading - Light"
              onclick="openModal(this)"
            />
            <div class="caption">Add Reading Modal - Input new glucose value</div>
          </div>
          <div class="screenshot-card">
            <img
              src="light/06-bolus-calculator.png"
              alt="Bolus Calculator - Light"
              onclick="openModal(this)"
            />
            <div class="caption">Bolus Calculator - Insulin dose calculation</div>
          </div>
          <div class="screenshot-card">
            <img src="light/07-settings.png" alt="Settings - Light" onclick="openModal(this)" />
            <div class="caption">Settings - App configuration</div>
          </div>
          <div class="screenshot-card">
            <img src="light/08-trends.png" alt="Trends - Light" onclick="openModal(this)" />
            <div class="caption">Trends - Glucose patterns over time</div>
          </div>
          <div class="screenshot-card">
            <img src="light/09-tips.png" alt="Tips - Light" onclick="openModal(this)" />
            <div class="caption">Tips - Health recommendations</div>
          </div>
          <div class="screenshot-card">
            <img
              src="light/10-achievements.png"
              alt="Achievements - Light"
              onclick="openModal(this)"
            />
            <div class="caption">Achievements - Gamification rewards</div>
          </div>
        </div>
      </section>

      <!-- DARK MODE -->
      <section>
        <h2>Dark Mode <span class="badge badge-info">9 Screens</span></h2>
        <div class="screenshot-grid">
          <div class="screenshot-card">
            <img src="dark/01-dashboard.png" alt="Dashboard - Dark" onclick="openModal(this)" />
            <div class="caption">Dashboard - Dark theme overview</div>
          </div>
          <div class="screenshot-card">
            <img src="dark/02-readings.png" alt="Readings - Dark" onclick="openModal(this)" />
            <div class="caption">Readings List - Dark theme</div>
          </div>
          <div class="screenshot-card">
            <img
              src="dark/03-appointments.png"
              alt="Appointments - Dark"
              onclick="openModal(this)"
            />
            <div class="caption">Appointments - Dark theme</div>
          </div>
          <div class="screenshot-card">
            <img src="dark/04-profile.png" alt="Profile - Dark" onclick="openModal(this)" />
            <div class="caption">Profile - Dark theme</div>
          </div>
          <div class="screenshot-card">
            <img src="dark/05-add-reading.png" alt="Add Reading - Dark" onclick="openModal(this)" />
            <div class="caption">Add Reading - Dark theme</div>
          </div>
          <div class="screenshot-card">
            <img
              src="dark/06-bolus-calculator.png"
              alt="Bolus Calculator - Dark"
              onclick="openModal(this)"
            />
            <div class="caption">Bolus Calculator - Dark theme</div>
          </div>
          <div class="screenshot-card">
            <img src="dark/07-settings.png" alt="Settings - Dark" onclick="openModal(this)" />
            <div class="caption">Settings - Dark theme</div>
          </div>
          <div class="screenshot-card">
            <img src="dark/08-trends.png" alt="Trends - Dark" onclick="openModal(this)" />
            <div class="caption">Trends - Dark theme</div>
          </div>
          <div class="screenshot-card">
            <img
              src="dark/10-achievements.png"
              alt="Achievements - Dark"
              onclick="openModal(this)"
            />
            <div class="caption">Achievements - Dark theme</div>
          </div>
        </div>
      </section>

      <!-- HIGH CONTRAST MODE -->
      <section>
        <h2>High Contrast Mode <span class="badge badge-warning">Accessibility</span></h2>
        <div class="screenshot-grid">
          <div class="screenshot-card">
            <img
              src="high-contrast/01-dashboard.png"
              alt="Dashboard - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Dashboard - High contrast for accessibility</div>
          </div>
          <div class="screenshot-card">
            <img
              src="high-contrast/02-readings.png"
              alt="Readings - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Readings List - High contrast</div>
          </div>
          <div class="screenshot-card">
            <img
              src="high-contrast/03-appointments.png"
              alt="Appointments - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Appointments - High contrast</div>
          </div>
          <div class="screenshot-card">
            <img
              src="high-contrast/04-profile.png"
              alt="Profile - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Profile - High contrast</div>
          </div>
          <div class="screenshot-card">
            <img
              src="high-contrast/05-add-reading.png"
              alt="Add Reading - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Add Reading - High contrast</div>
          </div>
          <div class="screenshot-card">
            <img
              src="high-contrast/06-bolus-calculator.png"
              alt="Bolus Calculator - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Bolus Calculator - High contrast</div>
          </div>
          <div class="screenshot-card">
            <img
              src="high-contrast/07-settings.png"
              alt="Settings - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Settings - High contrast</div>
          </div>
          <div class="screenshot-card">
            <img
              src="high-contrast/08-trends.png"
              alt="Trends - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Trends - High contrast</div>
          </div>
          <div class="screenshot-card">
            <img
              src="high-contrast/10-achievements.png"
              alt="Achievements - High Contrast"
              onclick="openModal(this)"
            />
            <div class="caption">Achievements - High contrast</div>
          </div>
        </div>
      </section>

      <!-- EMAIL STATUS -->
      <section>
        <h2>Email System Status <span class="badge badge-success">Configured</span></h2>

        <div class="success-box">
          <h4>Email System is Working</h4>
          <p>
            The resolution email was sent to <strong>jcrespo@fi.uba.ar</strong> when the appointment
            resolution was created.
          </p>
        </div>

        <div class="info-box">
          <h4>Configuration Details</h4>
          <table>
            <tr>
              <th>Setting</th>
              <th>Value</th>
            </tr>
            <tr>
              <td>SMTP Provider</td>
              <td>Gmail</td>
            </tr>
            <tr>
              <td>Sender Account</td>
              <td>diabetactic@gmail.com</td>
            </tr>
            <tr>
              <td>User Email</td>
              <td>jcrespo@fi.uba.ar</td>
            </tr>
            <tr>
              <td>Email Subject</td>
              <td>"Nueva resolucion creada para tu consulta"</td>
            </tr>
          </table>
        </div>

        <div class="info-box">
          <h4>If Email Not Received</h4>
          <ul style="margin-top: 0.5rem; padding-left: 1.5rem">
            <li>Check <strong>jcrespo@fi.uba.ar</strong> inbox</li>
            <li>Check spam/junk folder</li>
            <li>Email is sent when resolution is created (may have been sent previously)</li>
          </ul>
        </div>
      </section>

      <!-- TEST CREDENTIALS -->
      <section>
        <h2>Test Environment</h2>
        <table>
          <tr>
            <th>Service</th>
            <th>URL</th>
            <th>Credentials</th>
          </tr>
          <tr>
            <td>Diabetify App</td>
            <td>
              <a href="https://diabetify-c45581776692.herokuapp.com/" style="color: var(--primary)"
                >diabetify-c45581776692.herokuapp.com</a
              >
            </td>
            <td>DNI: 40999999 / Password: thepassword</td>
          </tr>
          <tr>
            <td>Backoffice</td>
            <td>
              <a
                href="https://diabetactic-backoffice-web-824ef6f5a93e.herokuapp.com/"
                style="color: var(--primary)"
                >diabetactic-backoffice-web</a
              >
            </td>
            <td>admin / admin</td>
          </tr>
          <tr>
            <td>Login Service</td>
            <td>
              <a
                href="https://login-service-9cb2cad7e2f2.herokuapp.com/"
                style="color: var(--primary)"
                >login-service</a
              >
            </td>
            <td>API Service</td>
          </tr>
        </table>
      </section>

      <footer>
        <p>Diabetify - Comprehensive Evidence Report</p>
        <p>
          Branch: feature/redis-refresh-tokens-and-appointments | Generated by E2E Testing Suite
        </p>
      </footer>
    </div>

    <!-- Image Modal -->
    <div class="modal" id="imageModal" onclick="closeModal()">
      <span class="modal-close">&times;</span>
      <img id="modalImage" src="" alt="Full size image" />
    </div>

    <script>
      function openModal(img) {
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        modal.style.display = 'block';
        modalImg.src = img.src;
      }

      function closeModal() {
        document.getElementById('imageModal').style.display = 'none';
      }

      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') closeModal();
      });
    </script>
  </body>
</html>
