appId: io.diabetify.app
---
# Test: Appointments List and Detail Interaction
# Description: Test appointments list, segmented navigation, and detail views
# Prerequisites: User must be logged in

# Launch app
- launchApp
- waitForAnimationToEnd

# Navigate to Appointments tab
- tapOn:
    text: ".*Appointments.*|.*Citas.*"
- waitForAnimationToEnd

# Verify appointments page loaded
- assertVisible:
    text: ".*Appointments.*|.*Citas.*"

# Take initial screenshot
- takeScreenshot: screenshots/22_appointments_initial.png

# Verify segment controls (Upcoming/Past)
- assertVisible:
    text: ".*Upcoming.*|.*Próximas.*"

- assertVisible:
    text: ".*Past.*|.*Pasadas.*"

# By default, should show upcoming appointments
- assertVisible:
    text: ".*confirmed.*|.*confirmada.*"

# Take screenshot of upcoming appointments
- takeScreenshot: screenshots/23_appointments_upcoming.png

# Check for appointment details
- assertVisible:
    text: ".*Doctor.*|.*Médico.*"

# Tap on first appointment to view details
- tapOn:
    text: ".*confirmed.*|.*confirmada.*"
- waitForAnimationToEnd

# Verify appointment detail view opened
- assertVisible:
    text: ".*Appointment.*|.*Cita.*|.*Details.*|.*Detalles.*"

# Take screenshot of appointment detail
- takeScreenshot: screenshots/24_appointment_detail.png

# Verify detail information is displayed
- assertVisible:
    text: ".*Date.*|.*Fecha.*"

- assertVisible:
    text: ".*Time.*|.*Hora.*"

- assertVisible:
    text: ".*Doctor.*|.*Médico.*"

# Take detailed screenshot
- takeScreenshot: screenshots/25_appointment_detail_full.png

# Go back to appointments list
- back
- waitForAnimationToEnd

# Verify back on appointments list
- assertVisible:
    text: ".*Upcoming.*|.*Próximas.*"

# Switch to Past appointments segment
- tapOn:
    text: ".*Past.*|.*Pasadas.*"
- waitForAnimationToEnd

# Verify past appointments segment loaded
- assertVisible:
    text: ".*Past.*|.*Pasadas.*"

# Take screenshot of past appointments
- takeScreenshot: screenshots/26_appointments_past.png

# Test pull-to-refresh
- scrollUp
- waitForAnimationToEnd:
    timeout: 5000

# Take screenshot after refresh
- takeScreenshot: screenshots/27_appointments_refreshed.png

# Look for Create Appointment button (FAB or button)
- tapOn:
    id: ".*add.*|.*create.*|.*new.*"
- waitForAnimationToEnd

# Verify create appointment form/page opened
- assertVisible:
    text: ".*New.*|.*Nueva.*|.*Create.*|.*Crear.*"

# Take screenshot of create appointment view
- takeScreenshot: screenshots/28_appointment_create.png

# Go back to appointments list
- back
- waitForAnimationToEnd

# Final screenshot
- takeScreenshot: screenshots/29_appointments_complete.png
