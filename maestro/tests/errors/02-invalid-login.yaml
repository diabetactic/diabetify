# ==========================================
# Test: Invalid Login Error Handling
# Description: Verify app shows error for invalid credentials
# ==========================================

appId: io.diabetactic.app

env:
  INVALID_USER: 'invalid_user_12345'
  INVALID_PASSWORD: 'wrong_password_12345'

---
# 1. CLEAR STATE AND LAUNCH
- clearState: io.diabetactic.app
- launchApp

# 2. WAIT FOR WELCOME SCREEN
- extendedWaitUntil:
    visible:
      text: '.*Diabetactic.*'
    timeout: 5000

# 3. TAP SIGN IN
- tapOn:
    text: 'Iniciar Sesi칩n|Sign In'
    optional: true
- waitForAnimationToEnd

# 4. WAIT FOR LOGIN FORM
- extendedWaitUntil:
    visible:
      text: 'DNI o Email|DNI or Email'
    timeout: 5000

# 5. ENTER INVALID CREDENTIALS
- tapOn:
    text: 'DNI o Email|DNI or Email'
- eraseText
- inputText: '${INVALID_USER}'
- hideKeyboard

- tapOn:
    text: 'Contrase침a|Password'
- eraseText
- inputText: '${INVALID_PASSWORD}'
- hideKeyboard

# 6. SUBMIT LOGIN
- tapOn:
    text: 'Iniciar Sesi칩n|Sign In'
- waitForAnimationToEnd

# 7. VERIFY ERROR MESSAGE APPEARS
- extendedWaitUntil:
    visible:
      text: 'Error|Inv치lido|Invalid|Incorrecto|Incorrect|credenciales|credentials'
    timeout: 5000

# 8. VERIFY STILL ON LOGIN PAGE (didn't navigate)
- assertVisible:
    text: 'DNI o Email|DNI or Email'
