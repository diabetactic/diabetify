# ==========================================
# Test: Network Error Handling
# Description: Verify app handles network errors gracefully
# Note: This test requires airplane mode or network interception
# ==========================================

appId: io.diabetactic.app

---
# 1. LOGIN (while online)
- runFlow: ../../flows/login.yaml

# 2. NAVIGATE TO READINGS
- tapOn:
    text: 'Lecturas|Readings'
- waitForAnimationToEnd

# 3. VERIFY READINGS PAGE LOADED
- extendedWaitUntil:
    visible:
      text: 'Mostrando.*lecturas|Showing.*readings'
    timeout: 5000

# Note: To fully test offline behavior, manually enable airplane mode
# and verify app shows appropriate error messages or cached data

# 4. VERIFY APP DOESN'T CRASH WHEN OFFLINE
- assertVisible:
    text: 'Lecturas|Readings'

# 5. TRY TO ADD READING OFFLINE (should queue or show error)
- tapOn:
    text: 'Agregar|Add'
    optional: true
- waitForAnimationToEnd

# 6. VERIFY ERROR MESSAGE OR OFFLINE INDICATOR
- assertVisible:
    text: 'Error|Sin conexi√≥n|Offline|No connection'
    optional: true
