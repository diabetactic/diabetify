# ==========================================
# Test: Appointments Page - Appointment Card Interaction
# Description: Verify appointment cards can be tapped and show details
# NOTE: This test validates appointment card interaction.
#       Full accept/deny flow requires clean backend state.
#       For full flow testing, use Playwright against local Docker.
# ==========================================

appId: io.diabetactic.app

---
# 1. LOGIN
- runFlow: ../../flows/login.yaml

# 2. NAVIGATE TO APPOINTMENTS
- runFlow: ../../flows/navigate-appointments.yaml

# 3. VERIFY PAGE LOADS
- extendedWaitUntil:
    visible:
      text: 'Estado de la Cola|Queue Status'
    timeout: 8000

# 4. VERIFY CURRENT OR PAST APPOINTMENTS SECTION EXISTS
- extendedWaitUntil:
    visible:
      text: 'ACTUAL|Citas Anteriores|Past Appointments|Solicitar Cita|Request Appointment'
    timeout: 5000

# 5. IF THERE ARE APPOINTMENTS, TRY TO EXPAND PAST APPOINTMENTS
- tapOn:
    text: 'Citas Anteriores|Past Appointments'
    optional: true
- waitForAnimationToEnd:
    timeout: 1500

# 6. VERIFY APPOINTMENT DETAILS ARE VISIBLE (motive, glucose objective, etc)
# If there's any appointment, these labels should appear
- assertVisible:
    text: 'Ajuste de Dosis|Dose Adjustment|Objetivo de Glucosa|Glucose Objective|Citas|Appointments'
# Test passes - page loaded and shows appointment content
