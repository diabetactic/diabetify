# ==========================================
# Test: Appointments Page Basic Functionality
# Description: Verify appointments page loads and shows queue status
# NOTE: This test validates the appointments page loads correctly.
#       The full request->pending->accepted flow requires a clean backend
#       state which may not be available in shared test environments.
#       For full flow testing, use Playwright against local Docker backend.
# ==========================================

appId: io.diabetactic.app

env:
  BACKOFFICE_API_URL: 'https://dt-api-gateway-backoffice-3dead350d8fa.herokuapp.com'
  ADMIN_USERNAME: 'admin'
  ADMIN_PASSWORD: 'admin'

---
# 1. LOGIN
- runFlow: ../../flows/login.yaml

# 2. NAVIGATE TO APPOINTMENTS
- runFlow: ../../flows/navigate-appointments.yaml

# 3. VERIFY PAGE LOADS WITH QUEUE STATUS PANEL
- extendedWaitUntil:
    visible:
      text: 'Estado de la Cola|Queue Status'
    timeout: 8000

# 4. VERIFY CURRENT APPOINTMENT SECTION OR REQUEST BUTTON IS VISIBLE
# This matches either an existing appointment (ACTUAL section) or the request button
- extendedWaitUntil:
    visible:
      text: 'ACTUAL|Solicitar Cita|Request Appointment'
    timeout: 5000

# 5. VERIFY PAGE HAS EXPECTED STRUCTURE (header visible)
- assertVisible:
    text: 'Citas|Appointments'

# 6. VERIFY TAB BAR IS PRESENT (navigation working)
- assertVisible:
    text: 'Inicio|Home'
# Test passes if we got here - page loaded with queue status

