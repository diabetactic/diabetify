# ==========================================
# Test: Appointments Page - Past Appointments Section
# Description: Verify past appointments can be expanded and viewed
# NOTE: Deny flow requires specific queue state setup.
#       This test verifies past appointments UI.
#       For full deny flow, use Playwright against local Docker.
# ==========================================

appId: io.diabetactic.app

---
# 1. LOGIN
- runFlow: ../../flows/login.yaml

# 2. NAVIGATE TO APPOINTMENTS
- runFlow: ../../flows/navigate-appointments.yaml

# 3. VERIFY PAGE LOADS
- extendedWaitUntil:
    visible:
      text: 'Estado de la Cola|Queue Status'
    timeout: 8000

# 4. CHECK FOR PAST APPOINTMENTS SECTION (if user has history)
# This section shows "Citas Anteriores (N)" where N is the count
- extendedWaitUntil:
    visible:
      text: 'ACTUAL|Citas Anteriores|Past Appointments|Solicitar Cita'
    timeout: 5000

# 5. TRY TO EXPAND PAST APPOINTMENTS (optional - may not exist)
- tapOn:
    text: 'Citas Anteriores|Past Appointments'
    optional: true
- waitForAnimationToEnd:
    timeout: 1500

# 6. VERIFY PAGE STRUCTURE REMAINS STABLE
- assertVisible:
    text: 'Citas|Appointments'
# Test passes - past appointments section is accessible
