# Reusable Login Flow
# Usage: - runFlow: flows/login-flow.yaml
---
# Navigate to profile/login if needed
- tapOn:
    text: "Profile"
    optional: true
- waitForAnimationToEnd

# Look for login button
- tapOn:
    text: ".*[Ll]ogin.*|.*[Ss]ign [Ii]n.*"
    optional: true
- waitForAnimationToEnd

# Fill email
- tapOn:
    id: ".*email.*|.*username.*"
    optional: true
- inputText: "${EMAIL}"

# Fill password
- tapOn:
    id: ".*password.*"
    optional: true
- inputText: "${PASSWORD}"

# Submit
- tapOn:
    text: ".*[Ll]ogin.*|.*[Ss]ign [Ii]n.*|.*[Ss]ubmit.*"
- waitForAnimationToEnd

# Verify success
- assertVisible:
    text: ".*[Dd]ashboard.*|.*[Ww]elcome.*"
