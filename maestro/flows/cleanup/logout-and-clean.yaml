appId: io.diabetactic.app
---
# Reusable flow: Logout and clean app state
# Description: Logs out user and optionally clears app data
# Usage: runFlow: file: ../../flows/cleanup/logout-and-clean.yaml

# Navigate to profile/settings if not already there
- runFlow:
    when:
      notVisible: "Perfil|Profile|Settings"
    commands:
      - tapOn:
          id: "tab-button-profile"
      - waitForAnimationToEnd:
          timeout: 5000

# Scroll to find logout button
- scroll:
- waitForAnimationToEnd:
    timeout: 5000

# Tap logout/sign out
- tapOn:
    text: "Cerrar Sesión|Logout|Sign Out"
    optional: true
- waitForAnimationToEnd:
    timeout: 5000

# Confirm logout if asked
- tapOn:
    text: "Confirmar|Confirm|Sí|Yes|OK"
    optional: true
- waitForAnimationToEnd:
    timeout: 5000

# Verify we're back at login screen
- assertVisible: "Iniciar Sesión|Login|Sign In"