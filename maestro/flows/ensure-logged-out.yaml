appId: io.diabetactic.app
---
# Ensures the app is in logged out state
# Safe to run even if already logged out

# Check if we're already at login screen
- runFlow:
    when:
      visible: "Iniciar Sesión|Login|Sign In"
    commands:
      - stopApp  # Already logged out, nothing to do

# If we see Home/Dashboard, we need to logout
- runFlow:
    when:
      visible: "Inicio|Home|Dashboard"
    commands:
      - runFlow: logout.yaml

# If we see profile or any other authenticated screen
- runFlow:
    when:
      visible: "Perfil"
    commands:
      - runFlow: logout.yaml

# Final check - we should be at login screen
- assertVisible:
    text: "Iniciar Sesión|Login|Sign In|Empezar|Get Started"
    optional: true